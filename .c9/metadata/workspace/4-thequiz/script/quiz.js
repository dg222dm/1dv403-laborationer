{"changed":false,"filter":false,"title":"quiz.js","tooltip":"/4-thequiz/script/quiz.js","value":"\"use strict\";\nvar quizProgram = {\n    \n    questionTries: 0,\n    arrayOfQuestions: [],\n\n    init: function() { //Main: Should try to be as empty as possible, by just calling functions. \"generell\"\n\n        quizProgram.getQuestion(\"http://vhost3.lnu.se:20080/question/1\");\n\n    },\n\n    answer: function(nextURL) {\n        var answer = document.getElementById(\"textarea\");\n        document.getElementById(\"send\").onclick = function(e) {\n            quizProgram.sendAnswer(nextURL, answer.value);\n        };\n    },\n\n    getQuestion: function(questionURL) { // Function use: Calls the server with the url \n        var qRequest = new XMLHttpRequest();\n        \n        console.log(qRequest);\n        \n        qRequest.onreadystatechange = function() {\n            if (qRequest.readyState === 4) {\n                \n                if (qRequest.status === 200) {\n                    quizProgram.questionTries = 0;\n                    quizProgram.object = JSON.parse(qRequest.responseText);\n\n                    document.getElementById(\"question\").innerHTML = quizProgram.object.question;\n                    quizProgram.answer(quizProgram.object.nextURL);\n                }\n                \n                if(qRequest.status === 404) {\n                    var i;\n                    var results = document.getElementById(\"results\");\n                    \n                    for (i = 1; i < quizProgram.arrayOfQuestions.length + 1; i +=1) {\n                        var p = document.createElement(\"p\");\n                            p.innerHTML = \"Question Number: \"+ i +\" Amount of tries: \" + quizProgram.arrayOfQuestions[i-1];\n                            results.appendChild(p);\n                        }\n                }\n            }\n        };\n\n        qRequest.open(\"GET\", questionURL, true);\n        qRequest.send(null);\n\n    },\n\n    sendAnswer: function(answerURL, answer) {\n\n        var aRequest = new XMLHttpRequest();\n        //console.log(aRequest);\n        aRequest.onreadystatechange = function() {\n\n            if (aRequest.readyState === 4) {\n                \n                quizProgram.testObject = JSON.parse(aRequest.responseText);\n                console.log(quizProgram.testObject);\n                if (aRequest.status === 200) {\n                    document.getElementById(\"response\").innerHTML = quizProgram.testObject.message;\n                    quizProgram.getQuestion(quizProgram.testObject.nextURL);\n                    quizProgram.questionTries += 1;\n                    quizProgram.arrayOfQuestions.push(quizProgram.questionTries);\n                    //console.log(quizProgram.questionTries);\n                    console.log(quizProgram.arrayOfQuestions);\n                    \n                }\n                \n                if (aRequest.status === 400) {\n                    \n                    //console.log(quizProgram.testObject.message);\n                    document.getElementById(\"response\").innerHTML = quizProgram.testObject.message;\n                    quizProgram.questionTries += 1;\n                    console.log(quizProgram.questionTries);\n                    console.log(quizProgram.arrayOfQuestions);\n                    \n                }\n            }\n\n        };\n\n        var json = { answer: answer };\n        var testString = JSON.stringify(json);\n\n        aRequest.open(\"POST\", answerURL, true);\n        aRequest.setRequestHeader(\"Content-Type\", \"application/json\");\n        aRequest.send(testString);\n\n    }\n};\nwindow.onload = quizProgram.init;\n\n/*\nDu ska skapa en applikation i vilken användaren kan svara på ett antal frågor. \nSvarar användaren rätt så tas man vidare till nästa fråga och svara man fel så får man reda på detta och får möjligheten att svara igen. \nI grundutförande ska applikationen hålla reda på,\nhur många felaktiga svar man givit för varje fråga och när samtliga frågor har besvarats så ska resultatet presenteras \ndär det framgår hur många försök man behövde för att klara varje fråga.\n\n*/","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":345.99995470046997,"scrollleft":0,"selection":{"start":{"row":33,"column":17},"end":{"row":33,"column":17},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":21,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1421050456376}